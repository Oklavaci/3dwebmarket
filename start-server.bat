@echo off
cd /d "%~dp0"
echo Starting local server on http://localhost:8000
echo Press Ctrl+C to stop the server
powershell -Command "Add-Type -AssemblyName System.Net.HttpListener; $listener = New-Object System.Net.HttpListener; $listener.Prefixes.Add('http://localhost:8000/'); $listener.Start(); Write-Host 'Server running at http://localhost:8000'; [System.Diagnostics.Process]::Start('http://localhost:8000'); while($listener.IsListening) { $context = $listener.GetContext(); $request = $context.Request; $response = $context.Response; $localPath = $request.Url.LocalPath; if($localPath -eq '/') { $localPath = '/index.html' }; $filePath = Join-Path (Get-Location) $localPath.TrimStart('/'); if(Test-Path $filePath -PathType Leaf) { $bytes = [System.IO.File]::ReadAllBytes($filePath); $response.ContentLength64 = $bytes.Length; if($filePath -match '\.html$') { $response.ContentType = 'text/html' } elseif($filePath -match '\.css$') { $response.ContentType = 'text/css' } elseif($filePath -match '\.js$') { $response.ContentType = 'text/javascript' } elseif($filePath -match '\.json$') { $response.ContentType = 'application/json' } elseif($filePath -match '\.png$') { $response.ContentType = 'image/png' } elseif($filePath -match '\.webp$') { $response.ContentType = 'image/webp' } elseif($filePath -match '\.jpg$') { $response.ContentType = 'image/jpeg' } else { $response.ContentType = 'application/octet-stream' }; $response.OutputStream.Write($bytes, 0, $bytes.Length); $response.Close() } else { $response.StatusCode = 404; $response.Close() } }"
pause
